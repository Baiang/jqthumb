/*
	Copyright (c) 2013-2013 Tho Pak Cheong
	Version: 1.1 (31-AUG-2013)
	Dual licensed under the MIT and GPL licenses.
	Requires: jQuery v1.2.5 or later
*/
(function(e,t,n,r){function o(t,n){this.element=t;this.settings=e.extend({},s,n);this._defaults=s;this._name=i;this.init()}var i="jqthumb",s={classname:"jqthumb",width:100,height:100,showoncomplete:true,complete:function(){}};o.prototype={init:function(){this.makethumbnail(this.element,this.settings)},makethumbnail:function(t,n){e(t).hide();if(this.support_css3_attr("backgroundSize")==false){e(t).parent().css({position:"relative",overflow:"hidden",width:n.width+"px",height:n.height+"px"});var r={obj:e(t),size:methods.getActualSize(e(t))};if(r.size.width>r.size.height){e(r.obj).css({width:"auto","max-height":99999999,"min-height":0,"max-width":99999999,"min-width":0,height:e(r.obj).parent().height()+"px"});var i=e(r.obj).height()/e(r.obj).width();if(e(r.obj).width()<e(r.obj).parent().width()){e(r.obj).css({width:e(r.obj).parent().width(),height:parseInt(e(r.obj).parent().width()*i)})}}else{e(r.obj).css({width:e(r.obj).parent().width()+"px","max-height":99999999,"min-height":0,"max-width":99999999,"min-width":0,height:"auto"});var i=e(r.obj).width()/e(r.obj).height();if(e(r.obj).height()<e(r.obj).parent().height()){e(r.obj).css({width:parseInt(e(r.obj).parent().height()*i),height:e(r.obj).parent().height()})}}if(e(r.obj).width()>e(r.obj).parent().width()){e(r.obj).css({position:"absolute",top:0,left:parseInt((e(r.obj).parent().width()-e(r.obj).width())/2)+"px"})}if(e(r.obj).height()>e(r.obj).parent().height()){e(r.obj).css({position:"absolute",top:parseInt((e(r.obj).parent().height()-e(r.obj).height())/2)+"px",left:0})}e(r.obj).addClass(n.classname);if(n.showoncomplete==true){e(r.obj).show()}n.complete.call(this,e(r.obj))}else{var s=this.percentOrPixel(n.width),o=this.percentOrPixel(n.height);e(t).one("load",function(){e(t).parent().css({width:s=="%"?n.width:n.width+"px",height:o=="%"?n.height:n.height+"px"});var r=e("<div/>").css({width:"100%",height:"100%","background-image":'url("'+e(t).attr("src")+'")',"background-repeat":"no-repeat","background-position":"center center","background-size":"cover",display:"none"}).addClass(n.classname).insertBefore(e(t));if(n.showoncomplete==true){e(r).show()}n.complete.call(t,e(r))}).each(function(){e(t).load()})}},percentOrPixel:function(t){var t=t.toString();var n=t.charAt(t.length-1);var t=t.substr(0,t.length-1);if(e.isNumeric(t)){if(n=="%"){return"%"}if(t.charAt(t.length-2,t.length).toLowerCase()=="px"){return"px"}}},getActualSize:function(e){var t=new Image;t.src=e.attr("src");e={width:t.width,height:t.height};return e},support_css3_attr:function(){var e=n.createElement("div"),t="Khtml Ms O Moz Webkit".split(" "),r=t.length;return function(n){if(n in e.style)return true;n=n.replace(/^[a-z]/,function(e){return e.toUpperCase()});while(r--){if(t[r]+n in e.style){return true}}return false}}()};e.fn[i]=function(t){return this.each(function(){if(!e.data(this,"plugin_"+i)){e.data(this,"plugin_"+i,new o(this,t))}})}})(jQuery,window,document)