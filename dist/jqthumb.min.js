/*!
    jQThumb V2.3.0
    Copyright (c) 2013-2016
    Dual licensed under the MIT and GPL licenses.

    Author       : Pak Cheong
    Version      : 2.3.0
    Repo         : https://github.com/pakcheong/jqthumb
    Demo         : http://pakcheong.github.io/jqthumb/
    Last Updated : Tuesday, March 29th, 2016, 9:29:56 PM
    Requirements : jQuery >=v1.3.0 or Zepto (with zepto-data plugin) >=v1.0.0
*/
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(function(){return"undefined"!=typeof jQuery?jQuery:"undefined"!==Zepto?Zepto:$}())}(function(a){function b(a,b){window.console&&"undefined"!=typeof a&&a&&"undefined"!=typeof b&&b&&(a=a.toLowerCase(),"error"==a?console.error(b):"log"==a?console.log(b):console.error('"'+a+'" is not supported as console type.'))}function c(b){return b=a.trim(b.toString()),"auto"===b.toLowerCase()?b:Number(b.replace(/[^\d.-]/g,""))}function d(a,b){var c=a.toString().match(/(-*)+\d+/)[0];return"px"==e(a)?0>a?0:a>b?b:a:"%"==e(a)?0>c?"0%":c>100?"100%":a:void 0}function e(b){var c=b.toString().match(/\d+(.*)/i);if(c)switch(a.trim(c[1])){case"":return"px";case"px":return"px";case"%":return"%"}return""}function f(b,c){a.fn[i].defaults=a.extend({},x,a.fn[i].defaults),this.element=b,this.settings=a.extend({},a.fn[i].defaults,c),this.settings.onDemandEvent=this.settings.onDemandEvent.toLowerCase(),this.settings.onDemandScrollCheck=this.settings.onDemandScrollCheck.toString().replace(/px/gi,""),this.settings.width=this.settings.width.toString().replace(/px/gi,""),this.settings.height=this.settings.height.toString().replace(/px/gi,""),this.settings.width||(c.width=x.width,this.settings.width=x.width),this.settings.height||(c.height=x.height,this.settings.height=x.height),this.settings.position.y=d(this.settings.position.y,this.settings.width),this.settings.position.x=d(this.settings.position.x,this.settings.height),this.settings.zoom=this.settings.zoom<0?0:this.settings.zoom,"string"==typeof c?"kill"==c.toLowerCase()&&this.kill(this.element):(a(this.element).data(v,this.settings),this.init())}var g=function(){var a=document.createElement("div"),b="Khtml Ms O Moz Webkit".split(" ");b.length;return function(c){if(c in a.style)return!0;c=c.replace(/^[a-z]/,function(a){return a.toUpperCase()});for(var d in b)if(b[d]+c in a.style)return!0;return!1}}();["width","height"].forEach(function(b){var c=b.replace(/./,function(a){return a[0].toUpperCase()});a.fn["outer"+c]||(a.fn["outer"+c]=function(){var a=this;if(a){var c=a[b](),d={width:["left","right"],height:["top","bottom"]};return d[b].forEach(function(b){c+=parseInt(a.css("margin-"+b),10),c+=parseInt(a.css("padding-"+b),10),c+=parseInt(a.css("border-"+b+"-width"),10)}),c}return null})});var h=function(b,d){var e=a(window),f=b.offset(),g={top:e.scrollTop(),left:window.scrollX};return g.right=g.left+e.width(),g.bottom=g.top+e.height(),f.right=f.left+b.outerWidth(),f.bottom=f.top+b.outerHeight(),d=d?c(d):0,!(g.right<f.left-d||g.left>f.right+d||g.bottom<f.top-d||g.top>f.bottom+d)},i="jqthumb",j=a(window),k=i+"-resize",l=["scroll."+i,"resize."+i,"scrollstop."+i],m=l.join(" "),n=null,o="click."+i,p=null,q="mouseenter."+i,r=null,s=i+"-render-position",t=i+"-original-styles",u=i+"-onscreen",v=i+"-options",w={outputElems:[],inputElems:[]},x={classname:i,width:100,height:100,position:{x:"50%",y:"50%"},source:"src",responsive:20,zoom:1,show:!0,renderPosition:"before",onDemand:!1,onDemandEvent:"scroll",onDemandScrollCheck:0,method:"auto",reinit:!0,before:function(){},after:function(){},done:function(){}};f.prototype={init:function(){var a=this.settings.method.toLowerCase();"auto"==a?g("backgroundSize")===!1?this["native"](this.element,this.settings):this.modern(this.element,this.settings):"modern"==a?this.modern(this.element,this.settings):"native"==a?this["native"](this.element,this.settings):b("error",'Invalid method. Only "auto", "modern" and "native" are allowed.')},kill:function(c){function d(a){j.unbind(m,n),a.unbind(o,p),a.parent().unbind(o,p),a.unbind(q,r),a.parent().unbind(q,r),a.removeAttr("style"),a.data(t)||(a.attr("style",a.data(t)),a.removeData(t)),a.data(i)&&a.removeData(i),a.data(v)&&a.removeData(v),a.data(u)&&a.removeData(u),a.data(s)&&a.removeData(s)}var e=a(c);if(e.data(i)){var f=[],g=function(){return"after"===e.data(s)?e.next():e.prev()}();if(g&&g.data(i)!==i){if(e.data(v).onDemand===!1)return b("error","Could not find the element. It is probably due to one or more element has been added right before the image element after the plugin initialization or it was removed."),!1;d(e)}f=[],a.each(w.outputElems,function(b,c){a(c)[0]!=g[0]&&f.push(w.outputElems[b])}),w.outputElems=f,f=[],a.each(w.inputElems,function(b,c){a(c)[0]!=e[0]&&f.push(w.inputElems[b])}),w.inputElems=f,g.data(k)&&(j.unbind("resize",g.data(k)),g.removeData(k)),g.remove(),d(e)}},"native":function(b,d){function f(b,f,g){var h=new Image;h.onload=function(){var f=this;"auto"===a.trim(d.width.toString().toLowerCase())&&(d.width=f.width.toString()),"auto"===a.trim(d.height.toString().toLowerCase())&&(d.height=f.height.toString());var h={obj:f,size:{width:this.width,height:this.height}},l=(e(d.width),e(d.height),d.responsive),m=a(h.obj),n=a("<div />"),o=0,p=function(){setTimeout(function(){q()},l)},q=function(){var b=m.parent(),f=b.height(),g=b.width(),i=d.zoom,j=d.position.x,k=d.position.y;if(h.size.width>h.size.height?(m.css({width:"auto","max-height":99999999,"min-height":0,"max-width":99999999,"min-width":0,height:f+"px"}),o=m.height()/m.width(),m.width()<g?m.css({width:g*i,height:parseFloat(g*o)*i}):m.css({width:m.width()*i,height:parseFloat(m.width()*o)*i})):(m.css({width:g+"px","max-height":99999999,"min-height":0,"max-width":99999999,"min-width":0,height:"auto"}),o=m.width()/m.height(),m.height()<f&&m.css({width:parseFloat(f*o)*i,height:f*i})),d.zoom<1){var l=a("<div />"),n=d.width.toString(),p=d.height.toString(),q=e(n),r=e(p);l.css({width:parseFloat(c(n)*d.zoom)+q,height:parseFloat(c(p)*d.zoom)+r,position:"relative",overflow:"hidden"}).appendTo(m.parent()),m.appendTo(l)}m.css({position:"absolute",left:function(){var a=0;return"%"==e(j)?(a=parseFloat((m.width()-m.parent().width())/100*c(j)),0>=a?a+"px":"-"+a+"px"):"px"==e(j)||isNaN(j)===!1?c(j)+"px":void 0}(),top:function(){var a=0;return"%"==e(k)?(a=parseFloat((m.height()-m.parent().height())/100*c(k)),0>=a?a+"px":"-"+a+"px"):"px"==e(k)||isNaN(k)===!1?c(k)+"px":void 0}()})};"after"===d.renderPosition.toLowerCase()?n.insertAfter(b):n.insertBefore(b),n.append(m).css({position:"relative",overflow:"hidden",width:c(d.width)+(e(d.width)?e(d.width):"px"),height:c(d.height)+(e(d.height)?e(d.height):"px")}).data(i,i),q(),!isNaN(l)&&l>0&&(n.data(k,p),j.bind("resize",n.data(k))),n.hide().addClass(d.classname),d.show===!0&&n.show(),"function"==typeof g&&g(n)},h.src=f}d.before.apply(b,[b]);var g=this,v=a(b),w=v.attr(d.source);n=function(){var a=h(v.parent(),d.onDemandScrollCheck);a&&!v.data(u)&&(v.data(u,!0).unwrap(),f(v,w,function(a){d.after.apply(b,[a]),g.updateGlobal(b,a,d)}))},p=function(){v.data(u)||(f(v,w,function(a){d.after.apply(b,[a]),g.updateGlobal(b,a,d)},!0),v.data(u,!0))},r=function(){v.data(u)||(f(v,w,function(a){d.after.apply(b,[a]),g.updateGlobal(b,a,d)},!0),v.data(u,!0))},v.data(t,v.attr("style")),v.data(s,d.renderPosition),v.hide(),d.onDemand===!0?"scroll"===d.onDemandEvent?(v.wrap("<div />"),v.parent().css({width:d.width?c(d.width)+e(d.width):v.width()+"px",height:d.height?c(d.height)+e(d.height):v.height()+"px"}),j.bind(m,n).triggerHandler(l[0])):"click"===d.onDemandEvent?v.parent().bind(o,p):"mouseenter"===d.onDemandEvent&&v.parent().bind(q,r):f(v,w,function(a){d.after.apply(b,[a]),g.updateGlobal(b,a,d)})},modern:function(b,d){function f(b,f,g){var h=new Image;h.onload=function(){var h=this;"auto"===a.trim(d.width.toString().toLowerCase())&&(d.width=h.width.toString()),"auto"===a.trim(d.height.toString().toLowerCase())&&(d.height=h.height.toString());var j=d.width?d.width:b.width().toString(),k=d.height?d.height:b.height().toString(),l=d.zoom,m=d.position.x,n=d.position.y,o=null,p=null;o=a("<div/>").css({width:c(j)+e(j),height:c(k)+e(k),display:"none",position:"relative",overflow:"hidden"}).addClass(d.classname).data(i,i),p=a("<div/>").css({width:"100%",height:"100%","background-image":'url("'+f+'")',"background-repeat":"no-repeat","background-position":c(m)+e(m)+" "+c(n)+e(n),"background-size":"cover"}).appendTo(o),"after"===d.renderPosition.toLowerCase()?o.insertAfter(b):o.insertBefore(b),o.show(),p.css({width:parseFloat(100*l)+"%",height:parseFloat(100*l)+"%",position:"absolute"}).css({top:function(){var a=o.height(),b=p.height();return"%"==e(n)?"-"+parseFloat((b-a)/a*100/(100/c(n)))+"%":void 0}(),left:function(){var a=o.width(),b=p.width();return"%"==e(m)?"-"+parseFloat((b-a)/a*100/(100/c(m)))+"%":void 0}()}),o.hide(),d.show===!0&&o.show(),"function"==typeof g&&g(o)},h.src=f}d.before.apply(b,[b]);var g=this,k=a(b),v=k.attr(d.source);n=function(){var a=h(k.parent(),d.onDemandScrollCheck);a&&!k.data(u)&&(k.data(u,!0).unwrap(),f(k,v,function(a){d.after.apply(b,[a]),g.updateGlobal(b,a,d)},!0))},p=function(){k.data(u)||(f(k,v,function(a){d.after.apply(b,[a]),g.updateGlobal(b,a,d)},!0),k.data(u,!0))},r=function(){k.data(u)||(f(k,v,function(a){d.after.apply(b,[a]),g.updateGlobal(b,a,d)},!0),k.data(u,!0))},k.data(t,k.attr("style")),k.data(s,d.renderPosition),k.hide(),d.onDemand===!0?"scroll"===d.onDemandEvent?(k.wrap("<div />"),k.parent().css({width:d.width?c(d.width)+e(d.width):k.width()+"px",height:d.height?c(d.height)+e(d.height):k.height()+"px"}),j.bind(m,n).triggerHandler(l[0])):"click"===d.onDemandEvent?k.parent().bind(o,p):"mouseenter"===d.onDemandEvent&&k.parent().bind(q,r):f(k,v,function(a){d.after.apply(b,[a]),g.updateGlobal(b,a,d)})},updateGlobal:function(b,c,d){b.global.outputElems.push(a(c)[0]),b.global.elemCounter++,w.outputElems.push(a(c)[0]),b.global.elemCounter==b.global.inputElems.length&&d.done.apply(b,[b.global.outputElems])}},a.fn[i]=function(c){var d={},e={elemCounter:0,outputElems:[],inputElems:function(b){for(var c=a(b),d=c.length,e=[],f=0;d>f;f++)e.push(c.get(f));return e}(a(this))};return a.fn.unwrap||(a.fn.unwrap=function(){this.parent().each(function(){a.nodeName(this,"body")||a(this).replaceWith(this.childNodes)}).end()}),d[i]=function(c){return"undefined"==typeof c?void b("error","Please specify an action like $."+i+'("killall")'):(c=c.toLowerCase(),void("killall"==c&&a.each(w.inputElems,function(){new f(this,"kill")})))},a.extend(a,d),this.each(function(){var b=a(this);this.global=e,w.inputElems.push(b),"string"==typeof c?new f(this,c):b.data(i)?b.data(v)&&b.data(v).reinit===!0&&(new f(this,"kill"),b.data(i,new f(this,c))):b.data(i,new f(this,c))})},a.fn[i].defaults=x});