/*!
    jQThumb V2.3.0
    Copyright (c) 2013-2016
    Released under the MIT license.

    Author       : Pak Cheong
    Version      : 2.3.0
    Repo         : git@github.com:pakcheong/jqthumb.git
    Demo         : http://pakcheong.github.io/jqthumb/
    Last Updated : Friday, April 1st, 2016, 3:54:27 PM
    Requirements : jQuery >=v1.3.0 or Zepto (with zepto-data plugin) >=v1.0.0
*/
!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):"object"==typeof exports?module.exports=a(require("jquery")):a(function(){return"undefined"!=typeof jQuery?jQuery:"undefined"!==Zepto?Zepto:$}())}(function(a){function b(a,b){window.console&&"undefined"!=typeof a&&a&&"undefined"!=typeof b&&b&&(a=a.toLowerCase(),"error"==a?console.error(b):"log"==a?console.log(b):console.error('"'+a+'" is not supported as console type.'))}function c(b){return b=a.trim(b.toString()),"auto"===b.toLowerCase()?b:Number(b.replace(/[^\d.-]/g,""))}function d(a,b){var c=a.toString().match(/(-*)+\d+/)[0];return"px"==e(a)?0>a?0:a>b?b:a:"%"==e(a)?0>c?"0%":c>100?"100%":a:void 0}function e(b){var c=b.toString().match(/\d+(.*)/i);if(c)switch(a.trim(c[1])){case"":return"px";case"px":return"px";case"%":return"%"}return""}function f(b,c){a.fn[i].defaults=a.extend({},u,a.fn[i].defaults),this.element=b,this.settings=a.extend({},a.fn[i].defaults,c),this.settings.onDemandEvent=this.settings.onDemandEvent.toLowerCase(),this.settings.onDemandScrollCheck=this.settings.onDemandScrollCheck.toString().replace(/px/gi,""),this.settings.width=this.settings.width.toString().replace(/px/gi,""),this.settings.height=this.settings.height.toString().replace(/px/gi,""),this.settings.width||(c.width=u.width,this.settings.width=u.width),this.settings.height||(c.height=u.height,this.settings.height=u.height),this.settings.position.y=d(this.settings.position.y,this.settings.width),this.settings.position.x=d(this.settings.position.x,this.settings.height),this.settings.zoom=this.settings.zoom<0?0:this.settings.zoom,"string"==typeof c?"kill"==c.toLowerCase()&&this.kill(this.element):(a(this.element).data(s,this.settings),this.init())}var g=function(){var a=document.createElement("div"),b="Khtml Ms O Moz Webkit".split(" ");b.length;return function(c){if(c in a.style)return!0;c=c.replace(/^[a-z]/,function(a){return a.toUpperCase()});for(var d in b)if(b[d]+c in a.style)return!0;return!1}}();a.fn.outerHeight&&a.fn.outerWidth||("function"!=typeof Array.prototype.forEach&&(Array.prototype.forEach=function(a){for(var b=0;b<this.length;b++)a.apply(this,[this[b],b,this])}),["width","height"].forEach(function(b){var c=b.replace(/./,function(a){return a[0].toUpperCase()});a.fn["outer"+c]||(a.fn["outer"+c]=function(){var a=this;if(a){var c=a[b](),d={width:["left","right"],height:["top","bottom"]};return d[b].forEach(function(b){c+=parseInt(a.css("margin-"+b),10),c+=parseInt(a.css("padding-"+b),10),c+=parseInt(a.css("border-"+b+"-width"),10)}),c}return null})}));var h=function(b,d){var e=a(window),f=b.offset(),g={top:e.scrollTop(),left:window.scrollX};return g.right=g.left+e.width(),g.bottom=g.top+e.height(),f.right=f.left+b.outerWidth(),f.bottom=f.top+b.outerHeight(),d=d?c(d):0,!(g.right<f.left-d||g.left>f.right+d||g.bottom<f.top-d||g.top>f.bottom+d)},i="jqthumb",j=a(window),k=i+"-resize",l=function(){for(var a=["scroll","resize","scrolltop"],b={},c=0;c<a.length;c++)b[a[c]]=a[c]+"."+i;return b}(),m=function(){var b=[];return a.each(l,function(a,c){b.push(a+"."+c)}),b.join(" ")}(),n="click."+i,o="mouseenter."+i,p=i+"-render-position",q=i+"-original-styles",r=i+"-onscreen",s=i+"-options",t={outputElems:[],inputElems:[]},u={classname:i,width:100,height:100,position:{x:"50%",y:"50%"},source:"src",responsive:20,zoom:1,show:!0,renderPosition:"before",onDemand:!1,onDemandEvent:"scroll",onDemandScrollCheck:0,method:"auto",reinit:!0,before:function(){},after:function(){},done:function(){}};f.prototype={init:function(){var a=this.settings.method.toLowerCase();"auto"==a?g("backgroundSize")===!1?this["native"](this.element,this.settings):this.modern(this.element,this.settings):"modern"==a?this.modern(this.element,this.settings):"native"==a?this["native"](this.element,this.settings):b("error",'Invalid method. Only "auto", "modern" and "native" are allowed.')},kill:function(c){function d(a){j.unbind(m),a.unbind(n),a.parent().unbind(n),a.unbind(o),a.parent().unbind(o),a.removeAttr("style"),a.data(q)||(a.attr("style",a.data(q)),a.removeData(q)),a.data(i)&&a.removeData(i),a.data(s)&&a.removeData(s),a.data(r)&&a.removeData(r),a.data(p)&&a.removeData(p)}var e=a(c);if(e.data(i)){var f=[],g=function(){return"after"===e.data(p)?e.next():e.prev()}();if(g&&g.data(i)!==i){if(e.data(s).onDemand===!1)return b("error","Could not find the element. It is probably due to one or more element has been added right before the image element after the plugin initialization or it was removed."),!1;d(e)}f=[],a.each(t.outputElems,function(b,c){a(c)[0]!=g[0]&&f.push(t.outputElems[b])}),t.outputElems=f,f=[],a.each(t.inputElems,function(b,c){a(c)[0]!=e[0]&&f.push(t.inputElems[b])}),t.inputElems=f,g.data(k)&&(j.unbind(l.resize),g.removeData(k)),g.remove(),d(e)}},"native":function(b,d){function f(b,f,g){var h=new Image;h.onload=function(){var f=this;"auto"===a.trim(d.width.toString().toLowerCase())&&(d.width=f.width.toString()),"auto"===a.trim(d.height.toString().toLowerCase())&&(d.height=f.height.toString());var h={obj:f,size:{width:this.width,height:this.height}},m=(e(d.width),e(d.height),d.responsive),n=a(h.obj),o=a("<div />"),p=0,q=function(){setTimeout(function(){r()},m)},r=function(){var b=n.parent(),f=b.height(),g=b.width(),i=d.zoom,j=d.position.x,k=d.position.y;if(h.size.width>h.size.height?(n.css({width:"auto","max-height":99999999,"min-height":0,"max-width":99999999,"min-width":0,height:f+"px"}),p=n.height()/n.width(),n.width()<g?n.css({width:g*i,height:parseFloat(g*p)*i}):n.css({width:n.width()*i,height:parseFloat(n.width()*p)*i})):(n.css({width:g+"px","max-height":99999999,"min-height":0,"max-width":99999999,"min-width":0,height:"auto"}),p=n.width()/n.height(),n.height()<f&&n.css({width:parseFloat(f*p)*i,height:f*i})),d.zoom<1){var l=a("<div />"),m=d.width.toString(),o=d.height.toString(),q=e(m),r=e(o);l.css({width:parseFloat(c(m)*d.zoom)+q,height:parseFloat(c(o)*d.zoom)+r,position:"relative",overflow:"hidden"}).appendTo(n.parent()),n.appendTo(l)}n.css({position:"absolute",left:function(){var a=0;return"%"==e(j)?(a=parseFloat((n.width()-n.parent().width())/100*c(j)),0>=a?a+"px":"-"+a+"px"):"px"==e(j)||isNaN(j)===!1?c(j)+"px":void 0}(),top:function(){var a=0;return"%"==e(k)?(a=parseFloat((n.height()-n.parent().height())/100*c(k)),0>=a?a+"px":"-"+a+"px"):"px"==e(k)||isNaN(k)===!1?c(k)+"px":void 0}()})};"after"===d.renderPosition.toLowerCase()?o.insertAfter(b):o.insertBefore(b),o.append(n).css({position:"relative",overflow:"hidden",width:c(d.width)+(e(d.width)?e(d.width):"px"),height:c(d.height)+(e(d.height)?e(d.height):"px")}).data(i,i),r(),!isNaN(m)&&m>0&&(o.data(k,q),j.bind(l.resize,o.data(k))),o.hide().addClass(d.classname),d.show===!0&&o.show(),"function"==typeof g&&g(o)},h.src=f}d.before.apply(b,[b]);var g=this,s=a(b),t=s.attr(d.source);s.data(q,s.attr("style")),s.data(p,d.renderPosition),s.hide(),d.onDemand===!0?"scroll"===d.onDemandEvent?(s.wrap("<div />"),s.parent().css({width:d.width?c(d.width)+e(d.width):s.width()+"px",height:d.height?c(d.height)+e(d.height):s.height()+"px"}),j.bind(m,function(){var a=h(s.parent(),d.onDemandScrollCheck);a&&!s.data(r)&&(s.data(r,!0).unwrap(),f(s,t,function(a){d.after.apply(b,[a]),g.updateGlobal(b,a,d)}))}).triggerHandler(l.scroll)):"click"===d.onDemandEvent?s.parent().bind(n,function(){s.data(r)||(f(s,t,function(a){d.after.apply(b,[a]),g.updateGlobal(b,a,d)},!0),s.data(r,!0))}):"mouseenter"===d.onDemandEvent&&s.parent().bind(o,function(){s.data(r)||(f(s,t,function(a){d.after.apply(b,[a]),g.updateGlobal(b,a,d)},!0),s.data(r,!0))}):f(s,t,function(a){d.after.apply(b,[a]),g.updateGlobal(b,a,d)})},modern:function(b,d){function f(b,f,g){var h=new Image;h.onload=function(){var h=this;"auto"===a.trim(d.width.toString().toLowerCase())&&(d.width=h.width.toString()),"auto"===a.trim(d.height.toString().toLowerCase())&&(d.height=h.height.toString());var j=d.width?d.width:b.width().toString(),k=d.height?d.height:b.height().toString(),l=d.zoom,m=d.position.x,n=d.position.y,o=null,p=null;o=a("<div/>").css({width:c(j)+e(j),height:c(k)+e(k),display:"none",position:"relative",overflow:"hidden"}).addClass(d.classname).data(i,i),p=a("<div/>").css({width:"100%",height:"100%","background-image":'url("'+f+'")',"background-repeat":"no-repeat","background-position":c(m)+e(m)+" "+c(n)+e(n),"background-size":"cover"}).appendTo(o),"after"===d.renderPosition.toLowerCase()?o.insertAfter(b):o.insertBefore(b),o.show(),p.css({width:parseFloat(100*l)+"%",height:parseFloat(100*l)+"%",position:"absolute"}).css({top:function(){var a=o.height(),b=p.height();return"%"==e(n)?"-"+parseFloat((b-a)/a*100/(100/c(n)))+"%":void 0}(),left:function(){var a=o.width(),b=p.width();return"%"==e(m)?"-"+parseFloat((b-a)/a*100/(100/c(m)))+"%":void 0}()}),o.hide(),d.show===!0&&o.show(),"function"==typeof g&&g(o)},h.src=f}d.before.apply(b,[b]);var g=this,k=a(b),s=k.attr(d.source);k.data(q,k.attr("style")),k.data(p,d.renderPosition),k.hide(),d.onDemand===!0?"scroll"===d.onDemandEvent?(k.wrap("<div />"),k.parent().css({width:d.width?c(d.width)+e(d.width):k.width()+"px",height:d.height?c(d.height)+e(d.height):k.height()+"px"}),j.bind(m,function(){var a=h(k.parent(),d.onDemandScrollCheck);a&&!k.data(r)&&(k.data(r,!0).unwrap(),f(k,s,function(a){d.after.apply(b,[a]),g.updateGlobal(b,a,d)},!0))}).triggerHandler(l.scroll)):"click"===d.onDemandEvent?k.parent().bind(n,function(){k.data(r)||(f(k,s,function(a){d.after.apply(b,[a]),g.updateGlobal(b,a,d)},!0),k.data(r,!0))}):"mouseenter"===d.onDemandEvent&&k.parent().bind(o,function(){k.data(r)||(f(k,s,function(a){d.after.apply(b,[a]),g.updateGlobal(b,a,d)},!0),k.data(r,!0))}):f(k,s,function(a){d.after.apply(b,[a]),g.updateGlobal(b,a,d)})},updateGlobal:function(b,c,d){b.global.outputElems.push(a(c)[0]),b.global.elemCounter++,t.outputElems.push(a(c)[0]),b.global.elemCounter==b.global.inputElems.length&&d.done.apply(b,[b.global.outputElems])}},a.fn[i]=function(c){var d={},e={elemCounter:0,outputElems:[],inputElems:function(b){for(var c=a(b),d=c.length,e=[],f=0;d>f;f++)e.push(c.get(f));return e}(a(this))};return a.fn.unwrap||(a.fn.unwrap=function(){this.parent().each(function(){a.nodeName(this,"body")||a(this).replaceWith(this.childNodes)}).end()}),d[i]=function(c){return"undefined"==typeof c?void b("error","Please specify an action like $."+i+'("killall")'):(c=c.toLowerCase(),void("killall"==c&&a.each(t.inputElems,function(){new f(this,"kill")})))},a.extend(a,d),this.each(function(){var b=a(this);this.global=e,t.inputElems.push(b),"string"==typeof c?new f(this,c):b.data(i)?b.data(s)&&b.data(s).reinit===!0&&(new f(this,"kill"),b.data(i,new f(this,c))):b.data(i,new f(this,c))})},a.fn[i].defaults=u});