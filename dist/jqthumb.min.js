/*!
    jQThumb V2.1.0
    Copyright (c) 2013-2014
    Dual licensed under the MIT and GPL licenses.

    Author       : Pak Cheong
    Version      : 2.1.0
    Repo         : https://github.com/pakcheong/jqthumb
    Demo         : http://pakcheong.github.io/jqthumb/
    Last Updated : Sunday, September 21st, 2014, 3:19:41 PM
    Requirements : jQuery >=v1.3.0 or Zepto (with zepto-data plugin) >=v1.0.0
*/
!function(a,b,c){function d(a){b.console||(b.console=function(){var a=function(){};return a.prototype.error=function(){},a.prototype.log=function(){},a.prototype.warn=function(){},new a}),"undefined"!=typeof a&&"object"==typeof a&&"undefined"!=typeof a.type&&a.type&&"undefined"!=typeof a.msg&&a.msg&&(a.type=a.type.toLowerCase(),"error"==a.type?console.error(a.msg):"log"==a.type?console.log(a.msg):"warn"==a.type?console.warn(a.msg):console.error('"'+a.type+'" is not supported as console type.'))}function e(b,c){this.element=b,this.settings=a.extend({},h,c),this.settings.width=this.settings.width.toString().replace(/px/g,""),this.settings.height=this.settings.height.toString().replace(/px/g,""),this.settings.position.y=this.settings.position.y.toString().replace(/px/g,""),this.settings.position.x=this.settings.position.x.toString().replace(/px/g,""),this._defaults=h,this._name=f,"string"==typeof c?"kill"==c.toLowerCase()&&this.kill(this.element):this.init()}var f="jqthumb",g={outputElems:[],inputElems:[]},h={classname:"jqthumb",width:100,height:100,position:{y:"50%",x:"50%"},source:"src",responsive:20,zoom:1,showoncomplete:!0,method:"auto",before:function(){},after:function(){},done:function(){}};e.prototype={init:function(){"auto"==this.settings.method.toLowerCase()?this.support_css3_attr("backgroundSize")===!1?this.nonCss3Supported_method(this.element,this.settings):this.css3Supported_method(this.element,this.settings):"css3"==this.settings.method.toLowerCase()?this.css3Supported_method(this.element,this.settings):"native"==this.settings.method.toLowerCase()?this.nonCss3Supported_method(this.element,this.settings):d({type:"error",msg:'Wrong method defined. Only "auto", "css3" and "native" are allowed.'})},kill:function(c){if(a(c).data(f)){if(a(c).prev().data(f)!==f)return d({type:"error",msg:"We could not find the element created by jqthumb. It is probably due to one or more element has been added right before the image element after the plugin initialization, or it was removed."}),!1;var e=[];a.each(g.outputElems,function(b,d){a(d)[0]==a(c).prev()[0]||e.push(g.outputElems[b])}),g.outputElems=e,e=[],a.each(g.inputElems,function(b,d){a(d)[0]==a(c)[0]||e.push(g.inputElems[b])}),g.inputElems=e,a(c).prev().data(f+"resize")&&(a(b).unbind("resize",a(c).prev().data(f+"resize")),a(c).prev().removeData(f+"resize")),a(c).prev().remove(),a(c).removeAttr("style"),"undefined"!=typeof a(c).data(f+"-original-styles")&&a(c).attr("style",a(c).data(f+"-original-styles")),"undefined"!=typeof a(c).data(f+"-original-styles")&&a(c).removeData(f+"-original-styles"),"undefined"!=typeof a(c).data(f)&&a(c).removeData(f)}},nonCss3Supported_method:function(c,d){d.before.call(c,c);var e=this,g=a(c);g.data(f+"-original-styles",g.attr("style")),g.hide();var h=a("<img/>");h.bind("load",function(){var i={obj:h,size:{width:this.width,height:this.height}},j=e.percentOrPixel(d.width),k=e.percentOrPixel(d.height),l=a("<div />"),m=0,n=function(){setTimeout(function(){o()},d.responsive)},o=function(){i.size.width>i.size.height?(a(i.obj).css({width:"auto","max-height":99999999,"min-height":0,"max-width":99999999,"min-width":0,height:a(i.obj).parent().height()+"px"}),m=a(i.obj).height()/a(i.obj).width(),a(i.obj).css(a(i.obj).width()<a(i.obj).parent().width()?{width:a(i.obj).parent().width()*d.zoom,height:parseFloat(a(i.obj).parent().width()*m)*d.zoom}:{width:a(i.obj).width()*d.zoom,height:parseFloat(a(i.obj).width()*m)*d.zoom})):(a(i.obj).css({width:a(i.obj).parent().width()+"px","max-height":99999999,"min-height":0,"max-width":99999999,"min-width":0,height:"auto"}),m=a(i.obj).width()/a(i.obj).height(),a(i.obj).height()<a(i.obj).parent().height()&&a(i.obj).css({width:parseFloat(a(i.obj).parent().height()*m)*d.zoom,height:a(i.obj).parent().height()*d.zoom})),posTop="%"==e.percentOrPixel(d.position.y)?d.position.y:d.position.y+"px",posLeft="%"==e.percentOrPixel(d.position.x)?d.position.x:d.position.x+"px",a(i.obj).css({position:"absolute",top:function(){return"%"==e.percentOrPixel(d.position.y)?"-"+parseFloat((a(i.obj).height()-a(l).height())/100*d.position.y.replace("%",""))+"px":"px"==e.percentOrPixel(d.position.y)||isNaN(d.position.y)===!1?d.position.y.replace("px","")+"px":void 0}(),left:function(){return"%"==e.percentOrPixel(d.position.x)?"-"+parseFloat((a(i.obj).width()-a(l).width())/100*d.position.x.replace("%",""))+"px":"px"==e.percentOrPixel(d.position.x)||isNaN(d.position.x)===!1?d.position.x.replace("px","")+"px":void 0}()})};a(l).insertBefore(g).append(a(i.obj)).css({position:"relative",overflow:"hidden",width:"%"==j?d.width:d.width+"px",height:"%"==k?d.height:d.height+"px"}).data(f,f),o(),d.responsive>0&&(a(l).data(f+"resize",n),a(b).bind("resize",a(l).data(f+"resize"))),a(l).hide().addClass(d.classname),d.showoncomplete===!0&&a(l).show(),d.after.call(c,a(l)),e.updateGlobal(c,a(l),d)}).attr("src",g.attr(d.source))},css3Supported_method:function(b,c){c.before.call(b,b);var d=this,e=a(b),g=a("<img />").attr("src",e.attr(c.source));e.data(f+"-original-styles",e.attr("style")),e.hide(),a.each(g,function(g,h){var i=a(h);i.one("load",function(){var g=d.percentOrPixel(c.width),h=d.percentOrPixel(c.height),i=null,j=null;i=a("<div/>").css({width:"%"==g?c.width:c.width+"px",height:"%"==h?c.height:c.height+"px",display:"none",position:"relative",overflow:"hidden"}).addClass(c.classname).data(f,f),j=a("<div/>").css({width:"100%",height:"100%","background-image":'url("'+e.attr(c.source)+'")',"background-repeat":"no-repeat","background-position":function(){var a="%"==d.percentOrPixel(c.position.y)?c.position.y:c.position.y+"px",b="%"==d.percentOrPixel(c.position.x)?c.position.x:c.position.x+"px";return b+" "+a}(),"background-size":"cover"}).appendTo(a(i)),a(i).insertBefore(a(b)),1!=c.zoom&&(a(i).show(),a(j).css({width:parseFloat(100*c.zoom)+"%",height:parseFloat(100*c.zoom)+"%",position:"absolute"}).css({top:function(){var b=a(i).height(),e=a(j).height();return"%"==d.percentOrPixel(c.position.y)?"-"+parseFloat((e-b)/b*100/(100/c.position.y.replace("%","")))+"%":void 0}(),left:function(){var b=a(i).width(),e=a(j).width();return"%"==d.percentOrPixel(c.position.x)?"-"+parseFloat((e-b)/b*100/(100/c.position.x.replace("%","")))+"%":void 0}()}),a(i).hide()),c.showoncomplete===!0&&a(i).show(),d.checkSrcAttrName(b,c),c.after.call(b,a(i)),d.updateGlobal(b,a(i),c)})})},updateGlobal:function(b,c,d){b.global.outputElems.push(a(c)[0]),b.global.elemCounter++,g.outputElems.push(a(c)[0]),b.global.elemCounter==b.global.inputElems.length&&d.done.call(b,b.global.outputElems)},checkSrcAttrName:function(b,c){"src"==c.source||"undefined"!=typeof a(b).attr("src")&&""!==a(b).attr("src")||a(b).attr("src",a(b).attr(c.source))},percentOrPixel:function(a){return a=a.toString(),a.match("px$")||a.match("PX$")||a.match("pX$")||a.match("Px$")?"px":a.match("%$")?"%":void 0},support_css3_attr:function(){{var a=c.createElement("div"),b="Khtml Ms O Moz Webkit".split(" ");b.length}return function(c){if(c in a.style)return!0;for(c=c.replace(/^[a-z]/,function(a){return a.toUpperCase()}),i=0;i<b.length;i++)if(b[i]+c in a.style)return!0;return!1}}()},a.fn[f]=function(b){var c={elemCounter:0,outputElems:[],inputElems:function(b){for(var c=a(b),d=c.length,e=[],f=0;d>f;f++)e.push(c.get(f));return e}(a(this))};return obj={},obj[f]=function(b){return"undefined"==typeof b?void d({type:"error",msg:'Please specify an action like $.jqthumb("killall")'}):(b=b.toLowerCase(),void("killall"==b&&a.each(g.inputElems,function(){new e(this,"kill")})))},a.extend(a,obj),this.each(function(){var d=a(this);this.global=c,g.inputElems.push(d),"string"==typeof b?new e(this,b):d.data(f)?(new e(this,"kill"),d.data(f,new e(this,b))):d.data(f,new e(this,b))})}}(window.jQuery||window.Zepto,window,document);