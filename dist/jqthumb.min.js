/*!
    jQThumb V2.3.0
    Copyright (c) 2013-2016
    Dual licensed under the MIT and GPL licenses.

    Author       : Pak Cheong
    Version      : 2.3.0
    Repo         : https://github.com/pakcheong/jqthumb
    Demo         : http://pakcheong.github.io/jqthumb/
    Last Updated : Monday, March 28th, 2016, 4:32:54 AM
    Requirements : jQuery >=v1.3.0 or Zepto (with zepto-data plugin) >=v1.0.0
*/
!function(a){"function"==typeof define&&define.amd?"__proto__"in{}===["jquery"]?define(["jquery"],a):"__proto__"in{}===["zepto"]?define(["zepto"],a):a($):a($)}(function(a){function b(a,b){window.console&&"undefined"!=typeof a&&a&&"undefined"!=typeof b&&b&&(a=a.toLowerCase(),"error"==a?console.error(b):"log"==a?console.log(b):console.error('"'+a+'" is not supported as console type.'))}function c(a){return a.replace(/[^\d.-]/g,"")}function d(a,b){var c=a.toString().match(/(-*)+\d+/)[0];return"px"==e(a)?0>a?0:a>b?b:a:"%"==e(a)?0>c?"0%":c>100?"100%":a:void 0}function e(b){var c=b.toString().match(/\d+(.*)/i);if(c)switch(a.trim(c[1])){case"":return"px";case"px":return"px";case"%":return"%"}}function f(b,c){this.element=b,this.settings=a.extend({},s,c),this.settings.scrollCheck=this.settings.scrollCheck.toString().replace(/px/gi,""),this.settings.width=this.settings.width.toString().replace(/px/gi,""),this.settings.height=this.settings.height.toString().replace(/px/gi,""),this.settings.position.y=d(this.settings.position.y,this.settings.width),this.settings.position.x=d(this.settings.position.x,this.settings.height),this.settings.zoom=this.settings.zoom<0?0:this.settings.zoom,"string"==typeof c?"kill"==c.toLowerCase()&&this.kill(this.element):(a(this.element).data(q,this.settings),this.init())}var g=function(){var a=document.createElement("div"),b="Khtml Ms O Moz Webkit".split(" ");b.length;return function(c){if(c in a.style)return!0;c=c.replace(/^[a-z]/,function(a){return a.toUpperCase()});for(var d in b)if(b[d]+c in a.style)return!0;return!1}}(),h=function(a,b){var c=a,d=j.scrollTop(),e=d+j.height(),f=c.offset().top,g=f+c.height();return b=b?0:b,e>=g-b&&f>=d},i="jqthumb",j=a(window),k=i+"-resize",l="scroll."+i+" resize."+i+" scrollstop."+i,m=null,n=i+"-render-position",o=i+"-original-styles",p=i+"-onscreen",q=i+"-options",r={outputElems:[],inputElems:[]},s={classname:i,width:100,height:100,position:{x:"50%",y:"50%"},source:"src",responsive:20,zoom:1,show:!0,renderPosition:"before",ondemand:!1,scrollCheck:0,method:"auto",reinit:!0,before:function(){},after:function(){},done:function(){}};f.prototype={init:function(){var a=this.settings.method.toLowerCase();"auto"==a?g("backgroundSize")===!1?this["native"](this.element,this.settings):this.modern(this.element,this.settings):"modern"==a?this.modern(this.element,this.settings):"native"==a?this["native"](this.element,this.settings):b("error",'Invalid method. Only "auto", "modern" and "native" are allowed.')},kill:function(c){var d=a(c);if(d.data(i)){var e=[],f=function(){return"after"===d.data(n)?d.next():d.prev()}();if(f.data(i)!==i)return b("error","Could not find the element. It is probably due to one or more element has been added right before the image element after the plugin initialization or it was removed."),!1;e=[],a.each(r.outputElems,function(b,c){a(c)[0]!=f[0]&&e.push(r.outputElems[b])}),r.outputElems=e,e=[],a.each(r.inputElems,function(b,c){a(c)[0]!=d[0]&&e.push(r.inputElems[b])}),r.inputElems=e,f.data(k)&&(j.unbind("resize",f.data(k)),f.removeData(k)),j.unbind(l,m),f.remove(),d.removeAttr("style"),d.data(o)||(d.attr("style",d.data(o)),d.removeData(o))}},"native":function(b,d){function f(b,f,g){var h=a("<img/>");h.bind("load",function(){var f={obj:h,size:{width:this.width,height:this.height}},l=(e(d.width),e(d.height),d.responsive),m=a(f.obj),n=a("<div />"),o=0,p=function(){setTimeout(function(){q()},l)},q=function(){var b=m.parent(),g=b.height(),h=b.width(),i=d.zoom,j=d.position.x,k=d.position.y;if(f.size.width>f.size.height?(m.css({width:"auto","max-height":99999999,"min-height":0,"max-width":99999999,"min-width":0,height:g+"px"}),o=m.height()/m.width(),m.width()<h?m.css({width:h*i,height:parseFloat(h*o)*i}):m.css({width:m.width()*i,height:parseFloat(m.width()*o)*i})):(m.css({width:h+"px","max-height":99999999,"min-height":0,"max-width":99999999,"min-width":0,height:"auto"}),o=m.width()/m.height(),m.height()<g&&m.css({width:parseFloat(g*o)*i,height:g*i})),d.zoom<1){var l=a("<div />"),n=d.width.toString(),p=d.height.toString(),q=e(n),r=e(p);l.css({width:parseFloat(c(n)*d.zoom)+q,height:parseFloat(c(p)*d.zoom)+r,position:"relative",overflow:"hidden"}).appendTo(m.parent()),m.appendTo(l)}m.css({position:"absolute",left:function(){var a=0;return"%"==e(j)?(a=parseFloat((m.width()-m.parent().width())/100*c(j)),0>=a?a+"px":"-"+a+"px"):"px"==e(j)||isNaN(j)===!1?c(j)+"px":void 0}(),top:function(){var a=0;return"%"==e(k)?(a=parseFloat((m.height()-m.parent().height())/100*c(k)),0>=a?a+"px":"-"+a+"px"):"px"==e(k)||isNaN(k)===!1?c(k)+"px":void 0}()})};"after"===d.renderPosition.toLowerCase()?n.insertAfter(b):n.insertBefore(b),n.append(m).css({position:"relative",overflow:"hidden",width:c(d.width)+e(d.width),height:c(d.height)+e(d.height)}).data(i,i),q(),!isNaN(l)&&l>0&&(n.data(k,p),j.bind("resize",n.data(k))),n.hide().addClass(d.classname),d.show===!0&&n.show(),"function"==typeof g&&g(n)}).attr("src",b.attr(d.source))}d.before.apply(b,[b]);var g=this,m=a(b),q=m.attr(d.source),r=function(){var a=h(m.parent(),d.scrollCheck);a&&!m.data(p)&&(m.data(p,!0),m.unwrap(),f(m,q,function(a){d.after.apply(b,[a]),g.updateGlobal(b,a,d)}))};m.data(o,m.attr("style")),m.data(n,d.renderPosition),m.hide(),d.ondemand===!0?(m.wrap("<div />"),j.bind(l,r)):f(m,q,function(a){d.after.apply(b,[$imgContainer]),g.updateGlobal(b,$imgContainer,d)})},modern:function(b,d){function f(b,f,g){$tempImg=a("<img />").attr("src",f),a.each($tempImg,function(h,j){var k=a(j);k.one("load",function(){var h=d.width,j=d.height,k=d.zoom,l=d.position.x,m=d.position.y,n=null,o=null;n=a("<div/>").css({width:c(h)+e(h),height:c(j)+e(j),display:"none",position:"relative",overflow:"hidden"}).addClass(d.classname).data(i,i),o=a("<div/>").css({width:"100%",height:"100%","background-image":'url("'+f+'")',"background-repeat":"no-repeat","background-position":c(l)+e(l)+" "+c(m)+e(m),"background-size":"cover"}).appendTo(n),"after"===d.renderPosition.toLowerCase()?n.insertAfter(b):n.insertBefore(b),n.show(),o.css({width:parseFloat(100*k)+"%",height:parseFloat(100*k)+"%",position:"absolute"}).css({top:function(){var a=n.height(),b=o.height();return"%"==e(m)?"-"+parseFloat((b-a)/a*100/(100/c(m)))+"%":void 0}(),left:function(){var a=n.width(),b=o.width();return"%"==e(l)?"-"+parseFloat((b-a)/a*100/(100/c(l)))+"%":void 0}()}),n.hide(),d.show===!0&&n.show(),"function"==typeof g&&g(n)})})}d.before.apply(b,[b]);var g=this,k=a(b),m=k.attr(d.source),q=function(){var a=h(k.parent(),d.scrollCheck);a&&!k.data(p)&&(k.data(p,!0),k.unwrap(),f(k,m,function(a){d.after.apply(b,[a]),g.updateGlobal(b,a,d)}))};k.data(o,k.attr("style")),k.data(n,d.renderPosition),k.hide(),d.ondemand===!0?(k.wrap("<div />"),j.bind(l,q)):f(k,m,function(a){d.after.apply(b,[a]),g.updateGlobal(b,a,d)})},updateGlobal:function(b,c,d){b.global.outputElems.push(a(c)[0]),b.global.elemCounter++,r.outputElems.push(a(c)[0]),b.global.elemCounter==b.global.inputElems.length&&d.done.apply(b,[b.global.outputElems])}},a.fn[i]=function(c){var d={},e={elemCounter:0,outputElems:[],inputElems:function(b){for(var c=a(b),d=c.length,e=[],f=0;d>f;f++)e.push(c.get(f));return e}(a(this))};return a.fn.unwrap||(a.fn.unwrap=function(){this.parent().each(function(){a.nodeName(this,"body")||a(this).replaceWith(this.childNodes)}).end()}),d[i]=function(c){return"undefined"==typeof c?void b("error","Please specify an action like $."+i+'("killall")'):(c=c.toLowerCase(),void("killall"==c&&a.each(r.inputElems,function(){new f(this,"kill")})))},a.extend(a,d),this.each(function(){var b=a(this);this.global=e,r.inputElems.push(b),"string"==typeof c?new f(this,c):b.data(i)?b.data(q)&&b.data(q).reinit===!0&&(new f(this,"kill"),b.data(i,new f(this,c))):b.data(i,new f(this,c))})}});