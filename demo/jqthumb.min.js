/*!
    jQThumb V2.1.3
    Copyright (c) 2013-2014
    Dual licensed under the MIT and GPL licenses.

    Author       : Pak Cheong
    Version      : 2.1.3
    Repo         : https://github.com/pakcheong/jqthumb
    Demo         : http://pakcheong.github.io/jqthumb/
    Last Updated : Wednesday, September 24th, 2014, 12:11:05 PM
    Requirements : jQuery >=v1.3.0 or Zepto (with zepto-data plugin) >=v1.0.0
*/
!function(a,b,c){function d(a,c){b.console&&"undefined"!=typeof a&&a&&"undefined"!=typeof c&&c&&(a=a.toLowerCase(),"error"==a?console.error(c):"log"==a?console.log(c):console.error('"'+a+'" is not supported as console type.'))}function e(b,c){this.element=b,this.settings=a.extend({},k,c),this.settings.width=this.settings.width.toString().replace(/px/g,""),this.settings.height=this.settings.height.toString().replace(/px/g,""),this.settings.position.y=this.settings.position.y.toString().replace(/px/g,""),this.settings.position.x=this.settings.position.x.toString().replace(/px/g,""),this._defaults=k,this._name=f,"string"==typeof c?"kill"==c.toLowerCase()&&this.kill(this.element):this.init()}var f="jqthumb",g=f+"-resize",h=f+"-original-styles",j={outputElems:[],inputElems:[]},k={classname:"jqthumb",width:100,height:100,position:{x:"50%",y:"50%"},source:"src",responsive:20,zoom:1,show:!0,method:"auto",before:function(){},after:function(){},done:function(){}};e.prototype={init:function(){var a=this.settings.method.toLowerCase();"auto"==a?this.css3_supported("backgroundSize")===!1?this.native(this.element,this.settings):this.modern(this.element,this.settings):"modern"==a?this.modern(this.element,this.settings):"native"==a?this.native(this.element,this.settings):d("error",'Invalid method. Only "auto", "modern" and "native" are allowed.')},kill:function(c){var e=a(c);if(e.data(f)){var i=[],k=e.prev();if(k.data(f)!==f)return d("error","Could not find the element. It is probably due to one or more element has been added right before the image element after the plugin initialization or it was removed."),!1;i=[],a.each(j.outputElems,function(b,c){a(c)[0]!=k[0]&&i.push(j.outputElems[b])}),j.outputElems=i,i=[],a.each(j.inputElems,function(b,c){a(c)[0]!=e[0]&&i.push(j.inputElems[b])}),j.inputElems=i,k.data(g)&&(a(b).unbind("resize",k.data(g)),k.removeData(g)),k.remove(),e.removeAttr("style"),"undefined"!=typeof e.data(h)&&(e.attr("style",e.data(h)),e.removeData(h)),"undefined"!=typeof e.data(f)&&e.removeData(f)}},"native":function(c,d){d.before.call(c,c);var e=this,i=a(c),j=a("<img/>");i.data(h,i.attr("style")),i.hide(),j.bind("load",function(){var h={obj:j,size:{width:this.width,height:this.height}},k=e.percOrPix(d.width),l=e.percOrPix(d.height),m=a(h.obj),n=a("<div />"),o=0,p=function(){setTimeout(function(){q()},d.responsive)},q=function(){var a=m.parent();h.size.width>h.size.height?(m.css({width:"auto","max-height":99999999,"min-height":0,"max-width":99999999,"min-width":0,height:a.height()+"px"}),o=m.height()/m.width(),m.css(m.width()<a.width()?{width:a.width()*d.zoom,height:parseFloat(a.width()*o)*d.zoom}:{width:m.width()*d.zoom,height:parseFloat(m.width()*o)*d.zoom})):(m.css({width:a.width()+"px","max-height":99999999,"min-height":0,"max-width":99999999,"min-width":0,height:"auto"}),o=m.width()/m.height(),m.height()<a.height()&&m.css({width:parseFloat(a.height()*o)*d.zoom,height:a.height()*d.zoom})),m.css({position:"absolute",left:function(){var a=0;return"%"==e.percOrPix(d.position.x)?(a=parseFloat((m.width()-n.width())/100*d.position.x.replace("%","")),0>=a?a:"-"+a):"px"==e.percOrPix(d.position.x)||isNaN(d.position.x)===!1?a=d.position.x.replace("px",""):void 0}(),top:function(){var a=0;return"%"==e.percOrPix(d.position.y)?(a=parseFloat((m.height()-n.height())/100*d.position.y.replace("%","")),0>=a?a:"-"+a):"px"==e.percOrPix(d.position.y)||isNaN(d.position.y)===!1?a=d.position.y.replace("px",""):void 0}()})};n.insertBefore(i).append(m).css({position:"relative",overflow:"hidden",width:"%"==k?d.width:d.width+"px",height:"%"==l?d.height:d.height+"px"}).data(f,f),q(),d.responsive>0&&(n.data(g,p),a(b).bind("resize",n.data(g))),n.hide().addClass(d.classname),d.show===!0&&n.show(),d.after.call(c,n),e.updateGlobal(c,n,d)}).attr("src",i.attr(d.source))},modern:function(b,c){c.before.call(b,b);var d=this,e=a(b),g=a("<img />").attr("src",e.attr(c.source));e.data(h,e.attr("style")),e.hide(),a.each(g,function(g,h){var i=a(h);i.one("load",function(){var g=d.percOrPix(c.width),h=d.percOrPix(c.height),i=null,j=null;i=a("<div/>").css({width:"%"==g?c.width:c.width+"px",height:"%"==h?c.height:c.height+"px",display:"none",position:"relative",overflow:"hidden"}).addClass(c.classname).data(f,f),j=a("<div/>").css({width:"100%",height:"100%","background-image":'url("'+e.attr(c.source)+'")',"background-repeat":"no-repeat","background-position":function(){var a="%"==d.percOrPix(c.position.x)?c.position.x:c.position.x+"px",b="%"==d.percOrPix(c.position.y)?c.position.y:c.position.y+"px";return a+" "+b}(),"background-size":"cover"}).appendTo(i),i.insertBefore(a(b)),1!=c.zoom&&(i.show(),j.css({width:parseFloat(100*c.zoom)+"%",height:parseFloat(100*c.zoom)+"%",position:"absolute"}).css({top:function(){var a=i.height(),b=j.height();return"%"==d.percOrPix(c.position.y)?"-"+parseFloat((b-a)/a*100/(100/c.position.y.replace("%","")))+"%":void 0}(),left:function(){var a=i.width(),b=j.width();return"%"==d.percOrPix(c.position.x)?"-"+parseFloat((b-a)/a*100/(100/c.position.x.replace("%","")))+"%":void 0}()}),i.hide()),c.show===!0&&i.show(),d.checkSrcAttrName(b,c),c.after.call(b,i),d.updateGlobal(b,i,c)})})},updateGlobal:function(b,c,d){b.global.outputElems.push(a(c)[0]),b.global.elemCounter++,j.outputElems.push(a(c)[0]),b.global.elemCounter==b.global.inputElems.length&&d.done.call(b,b.global.outputElems)},checkSrcAttrName:function(b,c){var d=a(b);"src"==c.source||"undefined"!=typeof d.attr("src")&&""!==d.attr("src")||d.attr("src",d.attr(c.source))},percOrPix:function(a){return a=a.toString(),a.match("px$")||a.match("PX$")||a.match("pX$")||a.match("Px$")?"px":a.match("%$")?"%":void 0},css3_supported:function(){{var a=c.createElement("div"),b="Khtml Ms O Moz Webkit".split(" ");b.length}return function(c){if(c in a.style)return!0;for(c=c.replace(/^[a-z]/,function(a){return a.toUpperCase()}),i=0;i<b.length;i++)if(b[i]+c in a.style)return!0;return!1}}()},a.fn[f]=function(b){var c={},g={elemCounter:0,outputElems:[],inputElems:function(b){for(var c=a(b),d=c.length,e=[],f=0;d>f;f++)e.push(c.get(f));return e}(a(this))};return c[f]=function(b){return"undefined"==typeof b?void d("error","Please specify an action like $."+f+'("killall")'):(b=b.toLowerCase(),void("killall"==b&&a.each(j.inputElems,function(){new e(this,"kill")})))},a.extend(a,c),this.each(function(){var c=a(this);this.global=g,j.inputElems.push(c),"string"==typeof b?new e(this,b):c.data(f)?(new e(this,"kill"),c.data(f,new e(this,b))):c.data(f,new e(this,b))})}}(window.jQuery||window.Zepto,window,document);